# Session Timeline: 2025-11-06
**Session ID:** a
**Exported:** Fri Nov 14 14:47:38 EST 2025

---

### 06:54:35 - USER
Research how to integrate AppleDB API as a data source for macOS restore images.

## Requirements
1. Review the API documentation at https://github.com/littlebyteorg/appledb/blob/main/API.md
2. Test the macOS endpoint: https://api.appledb.dev/ios/macOS/main.json
3. Research how to determine when AppleDB data was last updated:
   - Check HTTP Last-Modified header
   - Check if API provides update timestamps
   - Check GitHub API for repository commits (as explored in previous conversation)
   - Determine the best approach for sourceUpdatedAt timestamp

## From previous conversation, we know:
- Endpoint: https://api.appledb.dev/ios/macOS/main.json returns 2761 entries
- Has Last-Modified header: "last-modified: Wed, 05 Nov 2025 18:58:18 GMT"
- Data structure includes builds with "signed" array showing device identifiers
- Build 25B78 example: VirtualMac2,1 is in the signed array
- GitHub repo: https://github.com/littlebyteorg/appledb
- Latest commit to macOS data: 2025-11-03T22:20:20Z with message "Add OTAs and IAs"

## Please investigate and report:
1. What fields are available in the API response (structure of each entry)
2. How the "signed" array works (does it list device identifiers that CAN install it?)
3. Best approach for sourceUpdatedAt (HTTP header vs GitHub API vs other)
4. Any API rate limits or usage guidelines
5. Recommend priority level for AppleDB in merge logic based on update frequency/reliability

### 06:54:37 - ASSISTANT
I'll research the AppleDB API integration by checking the documentation, testing the endpoint, and investigating update mechanisms.

### 06:54:37 - ASSISTANT
[WebFetch: github.com]
[WebFetch: api.appledb.dev]
[WebSearch]

### 06:54:50 - ASSISTANT
The main endpoint response is too large. Let me get a smaller sample and check the GitHub repository directly for more details:

### 06:54:50 - ASSISTANT
[WebFetch: github.com]
[WebSearch]
[Bash: Check HTTP headers for macOS endpoint]

### 06:55:05 - ASSISTANT
Good, the Last-Modified header is updated. Let me get the actual API schema and look at a specific example entry:

### 06:55:05 - ASSISTANT
[WebFetch: raw.githubusercontent.com]
[Bash: Get first 5KB of macOS API response to s]
[WebSearch]

### 06:55:24 - ASSISTANT
Perfect! I can see the actual data structure now. Let me get a few more specific examples to understand the pattern better:

### 06:55:24 - ASSISTANT
[Bash: Parse and format macOS API response to s]
[WebSearch]

### 06:56:09 - ASSISTANT
Excellent! I now have a complete picture. Let me create a comprehensive research report:

## Research Report: AppleDB API Integration for macOS Restore Images

### 1. API Response Fields & Structure

Based on analysis of the `/ios/macOS/main.json` endpoint, each entry contains:

**Core Build Information:**
- `osStr` - Operating system string (e.g., "macOS")
- `version` - Human-readable version (e.g., "13.2 (a)")
- `build` - Build identifier (e.g., "22D7750270d")
- `uniqueBuild` - Unique build number
- `key` - Database key format: "macOS;{build}"

**Classification & Status:**
- `beta` - Boolean flag for beta status
- `rc` - Boolean flag for release candidate status
- `internal` - Boolean flag for internal/alpha builds
- `rsr` - Rapid security response indicator
- `released` - Release date string (ISO format, empty string if not released)

**Device Compatibility:**
- `deviceMap` - Array of device identifiers that support this build (e.g., "iMac18,1", "MacBookPro16,4", "VirtualMac2,1")
- `devices` - Object with device identifiers as keys, each containing per-device metadata (usually empty `{}`)
- `signed` - **CRITICAL FIELD**: Array of device identifiers for which Apple is actively signing this build, OR boolean `true` if all devices are signed, OR empty array `[]` if none signed

**Additional Metadata:**
- `preinstalled` - Array of device identifiers with this build pre-installed
- `buildTrain` - Internal build train name (e.g., "RomeDSeedRapid")
- `restoreVersion` - Restore/installer version string
- `appledbWebImage` - Display information with `id` and `align` properties
- `appledburl` - Direct link to AppleDB web page for this build
- `sources` - Array of available installation sources (see below)

**Installation Sources:**
Each source object contains:
- `type` - Source type: "ota" (over-the-air), "ipsw" (full installer), "ia" (internet assistant)
- `prerequisiteBuild` - Required previous build version for OTAs
- `deviceMap` - Device-specific array for this source


... [truncated]
